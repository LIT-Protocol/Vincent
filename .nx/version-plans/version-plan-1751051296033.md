---
registry-sdk: major
registry-backend: major
---

#### Add SIWE authentication

- Defined a new `siweAuth` securitySchema and applied it to all PUT, POST and DELETE endpoints
- SIWE auth is a custom Authorization scheme, using the prefix `SIWE:`, but is considered an `apiKey` semantically for compatibility purposes
- Implemented Metamask integration for getting SIWEs in the RapiDoc UI so we can still use it to test endpoints directly
- Added server selection to the RapiDoc endpoint
- Add authentication checks to all mutation endpoints in the registry backend. Wallet A cannot edit Wallet B's resources.
  **- Owner and manager wallet can no longer be provided as arguments in the endpoint payloads; they are always set during creation by getting the address of the signed SIWE**
- Implement integration test suite that verifies they are working as expected
- Updated tooling in the registry-backend to use the RapiDoc code that is in the registry-sdk instead of in-lining its own inside the express route

### Define tags per endpoint to support automatic cache invalidation

- Defined `tags` for all endpoints
- The RTK query client will now automatically refetch data for any existing subscriptions when a mutation occurs
- The tags are extremely simplistic, generic, and pessimistic. Basically, when an entity changes we reload all data for all entities of the same time. We will make this less pessimistic by using `.enhanceEndpoints` in a follow-up release.

### Internal

- Added `debug` package and implemented trace logging that can be toggled on per module by setting the appropriate path in the DEBUG env var.
- Replaced 'verboseLog()' functionality in the tests with usage of `debug()`
- Added logging to middleware to help verify they are all functioning as expected
